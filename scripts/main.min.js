!function(){if(!("modules"in app&&"adminAuthors"in app.modules)){var e=function(){var e=this;e.body="",e.alert="",e.getAuthor="",e.insert="",e.update="",e.container=document.querySelector(".adminAuthors"),e.content=e.container.querySelector(".adminAuthors__content"),e.authorSelect=e.container.querySelector('.formSelect__select[name="author"]'),e.editTemplate=e.container.querySelector("#adminAuthors-template").innerHTML,e.setupListener=function(){e.authorSelect.addEventListener("change",e.handleState),e.container.addEventListener("click",e.router)},e.router=function(t){t.preventDefault();var n=t.target.dataset.action;n&&e[n]&&e[n]()},e.add=function(){e.insert("authors",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,description:e.container.querySelector('.formInput__input[name="description"]').value,photo:e.container.querySelector('.formInput__input[name="photo"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupAuthorFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.edit=function(){e.update("authors",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,description:e.container.querySelector('.formInput__input[name="description"]').value,photo:e.container.querySelector('.formInput__input[name="photo"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"})},function(t){e.alert({title:"",text:t,type:"error"})})},e.remove=function(){confirm("Вы действительно хотите удалить выбранного лектора?")&&e["delete"]("authors",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,description:e.container.querySelector('.formInput__input[name="description"]').value,photo:e.container.querySelector('.formInput__input[name="photo"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupAuthorFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.setupAuthorFilter=function(){e.getAuthor().then(function(t){var n='<option value=""></option>';t.forEach(function(e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),e.authorSelect.innerHTML=n})},e.handleState=function(){e.authorSelect.value?e.setEditState():e.setNewState()},e.setEditState=function(){var t=e.authorSelect.value?parseInt(e.authorSelect.value):"";e.getAuthor(t).then(function(t){var n=t[0],a=document.createElement("div");a.classList.add("adminAuthors__edit"),a.innerHTML=e.editTemplate,a.querySelector(".adminAuthors__title").style.display="none",a.querySelector('.formInput__input[name="id"]').value=n.id,a.querySelector('.formInput__input[name="title"]').value=n.title,a.querySelector('.formInput__input[name="description"]').value=n.description,a.querySelector('.formInput__input[name="photo"]').value=n.photo,a.querySelector(".adminAuthors__box__button_type_add").style.display="none",e.render(a)})},e.setNewState=function(){var t=document.createElement("div");t.classList.add("adminAuthors__add"),t.innerHTML=e.editTemplate,t.querySelector(".adminAuthors__box__col_1").style.display="none",t.querySelector(".adminAuthors__box__button_type_edit").style.display="none",t.querySelector(".adminAuthors__box__button_type_remove").style.display="none",e.render(t)},e.render=function(t){e.content.innerHTML="",e.content.appendChild(t)},e.importDefaults=function(){e.body=app.modules.main.body,e.alert=app.modules.admin.alert,e.getAuthor=app.modules.main.library.getAuthor,e.insert=app.modules.main.library.insert,e.update=app.modules.main.library.update,e["delete"]=app.modules.main.library["delete"]},e.init=function(){e.container&&(e.importDefaults(),e.setupAuthorFilter(),e.handleState(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.adminAuthors=new e}}(),function(){if(!("modules"in app&&"admin"in app.modules)){var e=function(){var e=this;e.container=document.querySelector(".admin"),e.aside=e.container.querySelector(".admin__aside"),e.setupListener=function(){e.aside.addEventListener("click",e.handleAsideClick)},e.handleAsideClick=function(t){t.preventDefault();var n=t.target,a=n.tagName,r="";activeBox="",id="","A"===a&&(id=n.getAttribute("href"),r=e.aside.querySelector(".admin__aside__link_state_active"),activeBox=e.container.querySelector(".admin__box_state_active"),r&&r.classList.remove("admin__aside__link_state_active"),activeBox&&activeBox.classList.remove("admin__box_state_active"),n.classList.add("admin__aside__link_state_active"),e.container.querySelector(id).classList.add("admin__box_state_active"))},e.alert=function(e){alert(e.text)},e.importDefaults=function(){e.body=app.modules.main.body},e.init=function(){e.container&&(e.importDefaults(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.admin=new e}}(),function(){if(!("modules"in app&&"adminLectures"in app.modules)){var e=function(){var e=this;e.body="",e.alert="",e.getLecture="",e.getSchool="",e.getAuthor="",e.getPlace="",e.insert="",e.update="",e.container=document.querySelector(".adminLectures"),e.content=e.container.querySelector(".adminLectures__content"),e.lectureSelect=e.container.querySelector('.formSelect__select[name="lecture"]'),e.editTemplate=e.container.querySelector("#adminLectures-template").innerHTML,e.setupListener=function(){e.lectureSelect.addEventListener("change",e.handleState),e.container.addEventListener("click",e.router)},e.router=function(t){t.preventDefault();var n=t.target.dataset.action;n&&e[n]&&e[n]()},e.add=function(){e.insert("lectures",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,school:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="school"] option:checked')).map(function(e){return parseInt(e.value)}),author:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="author"] option:checked')).map(function(e){return parseInt(e.value)}),date:e.container.querySelector('.formInput__input[name="date"]').value,time:e.container.querySelector('.formInput__input[name="time"]').value,place:parseInt(e.container.querySelector('.formSelect__select[name="place"]').value),isOver:1===parseInt(e.container.querySelector('.formSelect__select[name="isOver"]').value),resources:e.container.querySelector('.formInput__input[name="resources"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupLectureFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.edit=function(){e.update("lectures",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,school:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="school"] option:checked')).map(function(e){return parseInt(e.value)}),author:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="author"] option:checked')).map(function(e){return parseInt(e.value)}),date:e.container.querySelector('.formInput__input[name="date"]').value,time:e.container.querySelector('.formInput__input[name="time"]').value,place:parseInt(e.container.querySelector('.formSelect__select[name="place"]').value),isOver:1===parseInt(e.container.querySelector('.formSelect__select[name="isOver"]').value),resources:e.container.querySelector('.formInput__input[name="resources"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"})},function(t){e.alert({title:"",text:t,type:"error"})})},e.remove=function(){confirm("Вы действительно хотите удалить выбранную лекцию?")&&e["delete"]("lectures",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,school:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="school"] option:checked')).map(function(e){return parseInt(e.value)}),author:[].slice.call(e.container.querySelectorAll('.formSelect__select[name="author"] option:checked')).map(function(e){return parseInt(e.value)}),date:e.container.querySelector('.formInput__input[name="date"]').value,time:e.container.querySelector('.formInput__input[name="time"]').value,place:parseInt(e.container.querySelector('.formSelect__select[name="place"]').value),isOver:1===parseInt(e.container.querySelector('.formSelect__select[name="isOver"]').value),resources:e.container.querySelector('.formInput__input[name="resources"]').value}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupLectureFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.setupLectureFilter=function(){e.getLecture().then(function(t){var n='<option value=""></option>';t.forEach(function(e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),e.lectureSelect.innerHTML=n})},e.handleState=function(){e.lectureSelect.value?e.setEditState():e.setNewState()},e.setEditState=function(){var t=e.lectureSelect.value?parseInt(e.lectureSelect.value):"",n={};e.getSchool().then(function(t){return n.schools=t,e.getAuthor()}).then(function(t){return n.authors=t,e.getPlace()}).then(function(a){n.places=a,e.getLecture(t).then(function(t){n.response=t[0];var a=document.createElement("div");a.classList.add("adminLectures__edit"),a.innerHTML=e.editTemplate;var r="",o="",i="";n.schools.forEach(function(e){var t=n.response.school.indexOf(e.id)!==-1?"selected":"";r+="<option "+t+' value="'+e.id+'">'+e.title+" ("+e.student+" чел.)</option>"}),n.authors.forEach(function(e){var t=n.response.author.indexOf(e.id)!==-1?"selected":"";o+="<option "+t+' value="'+e.id+'">'+e.title+"</option>"}),n.places.forEach(function(e){var t=n.response.place===e.id?"selected":"";i+="<option "+t+' value="'+e.id+'">'+e.title+" (вместимость: "+e.capacity+" чел.)</option>"}),a.querySelector(".adminLectures__title").style.display="none",a.querySelector('.formInput__input[name="id"]').value=n.response.id,a.querySelector('.formInput__input[name="title"]').value=n.response.title,a.querySelector('.formSelect__select[name="school"]').innerHTML=r,a.querySelector('.formSelect__select[name="author"]').innerHTML=o,a.querySelector('.formInput__input[name="date"]').value=n.response.date,a.querySelector('.formInput__input[name="time"]').value=n.response.time,a.querySelector('.formSelect__select[name="place"]').innerHTML=i,a.querySelector('.formSelect__select[name="isOver"] option[value="'+(n.response.isOver?1:0)+'"]').selected=!0,a.querySelector('.formInput__input[name="resources"]').value=n.response.resources,a.querySelector(".adminLectures__box__button_type_add").style.display="none",e.render(a)})})},e.setNewState=function(){var t={};e.getSchool().then(function(n){return t.schools=n,e.getAuthor()}).then(function(n){return t.authors=n,e.getPlace()}).then(function(n){t.places=n;var a=document.createElement("div");a.classList.add("adminLectures__add"),a.innerHTML=e.editTemplate;var r="",o="",i="";t.schools.forEach(function(e){r+='<option value="'+e.id+'">'+e.title+" ("+e.student+" чел.)</option>"}),t.authors.forEach(function(e){o+='<option value="'+e.id+'">'+e.title+"</option>"}),t.places.forEach(function(e){i+='<option value="'+e.id+'">'+e.title+" (вместимость: "+e.capacity+" чел.)</option>"}),a.querySelector(".adminLectures__box__col_1").style.display="none",a.querySelector('.formSelect__select[name="school"]').innerHTML=r,a.querySelector('.formSelect__select[name="author"]').innerHTML=o,a.querySelector('.formSelect__select[name="place"]').innerHTML=i,a.querySelector(".adminLectures__box__button_type_edit").style.display="none",a.querySelector(".adminLectures__box__button_type_remove").style.display="none",e.render(a)})},e.render=function(t){e.content.innerHTML="",e.content.appendChild(t)},e.importDefaults=function(){e.body=app.modules.main.body,e.alert=app.modules.admin.alert,e.getLecture=app.modules.main.library.getLecture,e.getSchool=app.modules.main.library.getSchool,e.getAuthor=app.modules.main.library.getAuthor,e.getPlace=app.modules.main.library.getPlace,e.insert=app.modules.main.library.insert,e.update=app.modules.main.library.update,e["delete"]=app.modules.main.library["delete"]},e.init=function(){e.container&&(e.importDefaults(),e.setupLectureFilter(),e.handleState(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.adminLectures=new e}}(),function(){if(!("modules"in app&&"adminPlaces"in app.modules)){var e=function(){var e=this;e.body="",e.alert="",e.getPlace="",e.insert="",e.update="",e.container=document.querySelector(".adminPlaces"),e.content=e.container.querySelector(".adminPlaces__content"),e.placeSelect=e.container.querySelector('.formSelect__select[name="place"]'),e.editTemplate=e.container.querySelector("#adminPlaces-template").innerHTML,e.setupListener=function(){e.placeSelect.addEventListener("change",e.handleState),e.container.addEventListener("click",e.router)},e.router=function(t){t.preventDefault();var n=t.target.dataset.action;n&&e[n]&&e[n]()},e.add=function(){e.insert("places",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,address:e.container.querySelector('.formInput__input[name="address"]').value,link:e.container.querySelector('.formInput__input[name="link"]').value,capacity:parseInt(e.container.querySelector('.formInput__input[name="capacity"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupPlaceFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.edit=function(){e.update("places",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,address:e.container.querySelector('.formInput__input[name="address"]').value,link:e.container.querySelector('.formInput__input[name="link"]').value,capacity:parseInt(e.container.querySelector('.formInput__input[name="capacity"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"})},function(t){e.alert({title:"",text:t,type:"error"})})},e.remove=function(){confirm("Вы действительно хотите удалить выбранную аудиторию?")&&e["delete"]("places",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,address:e.container.querySelector('.formInput__input[name="address"]').value,link:e.container.querySelector('.formInput__input[name="link"]').value,capacity:parseInt(e.container.querySelector('.formInput__input[name="capacity"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupPlaceFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.setupPlaceFilter=function(){e.getPlace().then(function(t){var n='<option value=""></option>';t.forEach(function(e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),e.placeSelect.innerHTML=n})},e.handleState=function(){e.placeSelect.value?e.setEditState():e.setNewState()},e.setEditState=function(){var t=e.placeSelect.value?parseInt(e.placeSelect.value):"";e.getPlace(t).then(function(t){var n=t[0],a=document.createElement("div");a.classList.add("adminPlaces__edit"),a.innerHTML=e.editTemplate,a.querySelector(".adminPlaces__title").style.display="none",a.querySelector('.formInput__input[name="id"]').value=n.id,a.querySelector('.formInput__input[name="title"]').value=n.title,a.querySelector('.formInput__input[name="address"]').value=n.address,a.querySelector('.formInput__input[name="link"]').value=n.link,a.querySelector('.formInput__input[name="capacity"]').value=n.capacity,a.querySelector(".adminPlaces__box__button_type_add").style.display="none",e.render(a)})},e.setNewState=function(){e.getPlace().then(function(t){var n=document.createElement("div");n.classList.add("adminPlaces__add"),n.innerHTML=e.editTemplate,n.querySelector(".adminPlaces__box__col_1").style.display="none",n.querySelector(".adminPlaces__box__button_type_edit").style.display="none",n.querySelector(".adminPlaces__box__button_type_remove").style.display="none",e.render(n)})},e.render=function(t){e.content.innerHTML="",e.content.appendChild(t)},e.importDefaults=function(){e.body=app.modules.main.body,e.alert=app.modules.admin.alert,e.getPlace=app.modules.main.library.getPlace,e.insert=app.modules.main.library.insert,e.update=app.modules.main.library.update,e["delete"]=app.modules.main.library["delete"]},e.init=function(){e.container&&(e.importDefaults(),e.setupPlaceFilter(),e.handleState(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.adminPlaces=new e}}(),function(){if(!("modules"in app&&"adminSchedule"in app.modules)){var e=function(){var e=this;e.body="",e.getSchedule="",e.getPlace="",e.getSchool="",e.getAuthor="",e.expand="",e.container=document.querySelector(".adminSchedule"),e.content=e.container.querySelector(".adminSchedule__content"),e.dateFromInput=e.container.querySelector('.formInput__input[name="from"]'),e.dateToInput=e.container.querySelector('.formInput__input[name="to"]'),e.placeSelect=e.container.querySelector('.formSelect__select[name="place"]'),e.template=e.container.querySelector("#adminSchedule-template").innerHTML,e.setupListener=function(){e.dateFromInput.addEventListener("change",e.getData),e.dateToInput.addEventListener("change",e.getData),e.placeSelect.addEventListener("change",e.getData)},e.setupPlaceFilter=function(){e.getPlace().then(function(t){var n='<option value=""></option>';t.forEach(function(e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),e.placeSelect.innerHTML=n})},e.getData=function(){var t=e.dateFromInput.value.replace(/-/g,"/"),n=e.dateToInput.value.replace(/-/g,"/"),a=e.placeSelect.value?parseInt(e.placeSelect.value):"";e.getSchedule(t,n,a).then(function(t){e.render(t)})},e.render=function(t){var n=document.createElement("ul");n.classList.add("adminSchedule__list"),t.lectures.forEach(function(a){var r=document.createElement("li");r.classList.add("adminSchedule__item"),r.innerHTML=e.template,r.querySelector(".adminSchedule__box__name").innerHTML=a.title,r.querySelector(".adminSchedule__box__school").innerHTML+=e.expand(a.school,{title:"schools",data:t.schools},"title"),r.querySelector(".adminSchedule__box__author").innerHTML+=e.expand(a.author,{title:"authors",data:t.authors},"title"),r.querySelector(".adminSchedule__box__date").innerHTML+=a.date,r.querySelector(".adminSchedule__box__time").innerHTML+=a.time,r.querySelector(".adminSchedule__box__place").innerHTML+=e.expand([a.place],{title:"places",data:t.places},"title"),r.querySelector(".adminSchedule__box__status").innerHTML+=a.isOver?"Лекция закончилась":"Лекция еще не закончилась",r.querySelector(".adminSchedule__box__resources a").href=a.resources,n.appendChild(r)}),e.content.innerHTML="",e.content.appendChild(n)},e.importDefaults=function(){e.body=app.modules.main.body,e.getSchedule=app.modules.main.library.getSchedule,e.getPlace=app.modules.main.library.getPlace,e.getSchool=app.modules.main.library.getSchool,e.getAuthor=app.modules.main.library.getAuthor,e.expand=app.modules.main.library.expand},e.init=function(){e.container&&(e.importDefaults(),e.setupPlaceFilter(),e.getData(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.adminSchedule=new e}}(),function(){if(!("modules"in app&&"adminSchools"in app.modules)){var e=function(){var e=this;e.body="",e.alert="",e.getSchool="",e.insert="",e.update="",e.container=document.querySelector(".adminSchools"),e.content=e.container.querySelector(".adminSchools__content"),e.schoolSelect=e.container.querySelector('.formSelect__select[name="school"]'),e.editTemplate=e.container.querySelector("#adminSchools-template").innerHTML,e.setupListener=function(){e.schoolSelect.addEventListener("change",e.handleState),e.container.addEventListener("click",e.router)},e.router=function(t){t.preventDefault();var n=t.target.dataset.action;n&&e[n]&&e[n]()},e.add=function(){e.insert("schools",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,student:parseInt(e.container.querySelector('.formInput__input[name="student"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupSchoolFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.edit=function(){e.update("schools",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,student:parseInt(e.container.querySelector('.formInput__input[name="student"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"})},function(t){e.alert({title:"",text:t,type:"error"})})},e.remove=function(){confirm("Вы действительно хотите удалить выбранную школу?")&&e["delete"]("schools",{id:parseInt(e.container.querySelector('.formInput__input[name="id"]').value),title:e.container.querySelector('.formInput__input[name="title"]').value,student:parseInt(e.container.querySelector('.formInput__input[name="student"]').value)}).then(function(t){e.alert({title:"",text:t,type:"success"}),e.setupSchoolFilter(),e.setNewState()},function(t){e.alert({title:"",text:t,type:"error"})})},e.setupSchoolFilter=function(){e.getSchool().then(function(t){var n='<option value=""></option>';t.forEach(function(e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),e.schoolSelect.innerHTML=n})},e.handleState=function(){e.schoolSelect.value?e.setEditState():e.setNewState()},e.setEditState=function(){var t=e.schoolSelect.value?parseInt(e.schoolSelect.value):"";e.getSchool(t).then(function(t){var n=t[0],a=document.createElement("div");a.classList.add("adminSchools__edit"),a.innerHTML=e.editTemplate,a.querySelector(".adminSchools__title").style.display="none",a.querySelector('.formInput__input[name="id"]').value=n.id,a.querySelector('.formInput__input[name="title"]').value=n.title,a.querySelector('.formInput__input[name="student"]').value=n.student,a.querySelector(".adminSchools__box__button_type_add").style.display="none",e.render(a)})},e.setNewState=function(){e.getSchool().then(function(t){var n=document.createElement("div");n.classList.add("adminSchools__add"),n.innerHTML=e.editTemplate,n.querySelector(".adminSchools__box__col_1").style.display="none",n.querySelector(".adminSchools__box__button_type_edit").style.display="none",n.querySelector(".adminSchools__box__button_type_remove").style.display="none",e.render(n)})},e.render=function(t){e.content.innerHTML="",e.content.appendChild(t)},e.importDefaults=function(){e.body=app.modules.main.body,e.alert=app.modules.admin.alert,e.getSchool=app.modules.main.library.getSchool,e.insert=app.modules.main.library.insert,e.update=app.modules.main.library.update,e["delete"]=app.modules.main.library["delete"]},e.init=function(){e.container&&(e.importDefaults(),e.setupSchoolFilter(),e.handleState(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.adminSchools=new e}}();var initApp=function(){if(!("modules"in app&&"main"in app.modules)){var e=function(){var e=this;e.html=document.querySelector("html"),e.body=document.querySelector("body"),e.modules=app.modules,e.library=new Library,e.initLibrary=function(){e.library.init()},e.initModules=function(){for(var t in e.modules)e.modules.hasOwnProperty(t)&&"undefined"!=typeof e.modules[t].init&&"main"!==t&&"library"!==t&&e.modules[t].init()},e.init=function(){e.initLibrary(),e.initModules()}};"modules"in app||(app.modules={}),app.modules.main=new e,app.modules.main.init()}};window.addEventListener("load",initApp),function(){if(!("modules"in app&&"modal"in app.modules)){var e=function(){var e=this;e.html="",e.body="",e.container=document.querySelector(".modal"),e.openButton=document.querySelector(".modal_trigger"),e.closeButton=document.querySelector(".modal_close"),e.setupListener=function(){e.body.addEventListener("click",e.router)},e.router=function(t){var n=t.target;n.classList.contains("modal_trigger")?(t.preventDefault(),e.open(t.target)):n.classList.contains("modal_close")&&(t.preventDefault(),e.close(t.target))},e.open=function(t){var n=t.getAttribute("href"),a=document.querySelector(n);e.html.classList.add("modal_state_open"),a.classList.add("modal_state_open")},e.close=function(t){var n=t.closest(".modal");n.classList.remove("modal_state_open"),e.html.classList.remove("modal_state_open")},e.importDefaults=function(){e.html=app.modules.main.html,e.body=app.modules.main.body},e.init=function(){e.container&&(e.importDefaults(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.modal=new e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluQXV0aG9ycy9hZG1pbkF1dGhvcnMuanMiLCJhZG1pbi9hZG1pbi5qcyIsImFkbWluTGVjdHVyZXMvYWRtaW5MZWN0dXJlcy5qcyIsImFkbWluUGxhY2VzL2FkbWluUGxhY2VzLmpzIiwiYWRtaW5TY2hlZHVsZS9hZG1pblNjaGVkdWxlLmpzIiwiYWRtaW5TY2hvb2xzL2FkbWluU2Nob29scy5qcyIsIm1haW4vbWFpbi5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbImFwcCIsIm1vZHVsZXMiLCJBZG1pbkF1dGhvcnMiLCJzZWxmIiwidGhpcyIsImJvZHkiLCJhbGVydCIsImdldEF1dGhvciIsImluc2VydCIsInVwZGF0ZSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJhdXRob3JTZWxlY3QiLCJlZGl0VGVtcGxhdGUiLCJpbm5lckhUTUwiLCJzZXR1cExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVN0YXRlIiwicm91dGVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImFjdGlvbiIsInRhcmdldCIsImRhdGFzZXQiLCJhZGQiLCJpZCIsInBhcnNlSW50IiwidmFsdWUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGhvdG8iLCJ0aGVuIiwicmVzcG9uc2UiLCJ0ZXh0IiwidHlwZSIsInNldHVwQXV0aG9yRmlsdGVyIiwic2V0TmV3U3RhdGUiLCJlZGl0IiwicmVtb3ZlIiwiY29uZmlybSIsImh0bWwiLCJmb3JFYWNoIiwiaXRlbSIsInNldEVkaXRTdGF0ZSIsImF1dGhvcklkIiwiZGF0YSIsImJveCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW5kZXIiLCJ0ZW1wbGF0ZSIsImFwcGVuZENoaWxkIiwiaW1wb3J0RGVmYXVsdHMiLCJtYWluIiwiYWRtaW4iLCJsaWJyYXJ5IiwiaW5pdCIsImFkbWluQXV0aG9ycyIsIkFkbWluIiwiYXNpZGUiLCJoYW5kbGVBc2lkZUNsaWNrIiwidGFnTmFtZSIsImFjdGl2ZVRhcmdldCIsImFjdGl2ZUJveCIsImdldEF0dHJpYnV0ZSIsIm9wdGlvbnMiLCJBZG1pbkxlY3R1cmVzIiwiZ2V0TGVjdHVyZSIsImdldFNjaG9vbCIsImdldFBsYWNlIiwibGVjdHVyZVNlbGVjdCIsInNjaG9vbCIsInNsaWNlIiwiY2FsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYXAiLCJhdXRob3IiLCJkYXRlIiwidGltZSIsInBsYWNlIiwiaXNPdmVyIiwicmVzb3VyY2VzIiwic2V0dXBMZWN0dXJlRmlsdGVyIiwibGVjdHVyZUlkIiwic2Nob29sU2VsZWN0IiwicGxhY2VTZWxlY3QiLCJzY2hvb2xzIiwiaXNTZWxlY3RlZCIsImluZGV4T2YiLCJzdHVkZW50IiwiYXV0aG9ycyIsInBsYWNlcyIsImNhcGFjaXR5Iiwic2VsZWN0ZWQiLCJhZG1pbkxlY3R1cmVzIiwiQWRtaW5QbGFjZXMiLCJhZGRyZXNzIiwibGluayIsInNldHVwUGxhY2VGaWx0ZXIiLCJwbGFjZUlkIiwiYWRtaW5QbGFjZXMiLCJBZG1pblNjaGVkdWxlIiwiZ2V0U2NoZWR1bGUiLCJleHBhbmQiLCJkYXRlRnJvbUlucHV0IiwiZGF0ZVRvSW5wdXQiLCJnZXREYXRhIiwiZGF0ZUZyb20iLCJyZXBsYWNlIiwiZGF0ZVRvIiwiY29udGVudExpc3QiLCJsZWN0dXJlcyIsImNvbnRlbnRJdGVtIiwiaHJlZiIsImFkbWluU2NoZWR1bGUiLCJBZG1pblNjaG9vbHMiLCJzZXR1cFNjaG9vbEZpbHRlciIsInNjaG9vbElkIiwiYWRtaW5TY2hvb2xzIiwiaW5pdEFwcCIsIk1haW4iLCJMaWJyYXJ5IiwiaW5pdExpYnJhcnkiLCJpbml0TW9kdWxlcyIsIm1vZHVsZSIsImhhc093blByb3BlcnR5Iiwid2luZG93IiwiTW9kYWwiLCJvcGVuQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJjb250YWlucyIsIm9wZW4iLCJjbG9zZSIsInNyYyIsImNsb3Nlc3QiLCJtb2RhbCJd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QUNBckQsRUFBQXVDLEtBQUExQyxJQUFBQyxRQUFBd0QsS0FBQWYsS0FDQXZDLEVBQUFFLEtBQUFMLElBQUFDLFFBQUF3RCxLQUFBcEQsTUFNQUYsRUFBQXlELEtBQUEsV0FDQXpELEVBQUFPLFlBRUFQLEVBQUFxRCxpQkFDQXJELEVBQUFjLGtCQU1BLFlBQUFqQixPQUNBQSxJQUFBQyxZQUdBRCxJQUFBQyxRQUFBMEksTUFBQSxHQUFBUiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdtb2R1bGVzJyBpbiBhcHAgJiYgJ2FkbWluQXV0aG9ycycgaW4gYXBwLm1vZHVsZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQWRtaW5BdXRob3JzIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBBZG1pbkF1dGhvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmJvZHkgPSAnJztcbiAgICAgICAgc2VsZi5hbGVydCA9ICcnO1xuICAgICAgICBzZWxmLmdldEF1dGhvciA9ICcnO1xuICAgICAgICBzZWxmLmluc2VydCA9ICcnO1xuICAgICAgICBzZWxmLnVwZGF0ZSA9ICcnO1xuICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkF1dGhvcnMnKTtcbiAgICAgICAgc2VsZi5jb250ZW50ID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmFkbWluQXV0aG9yc19fY29udGVudCcpO1xuICAgICAgICBzZWxmLmF1dGhvclNlbGVjdCA9IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cImF1dGhvclwiXScpO1xuICAgICAgICBzZWxmLmVkaXRUZW1wbGF0ZSA9IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNhZG1pbkF1dGhvcnMtdGVtcGxhdGUnKS5pbm5lckhUTUw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5hdXRob3JTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5oYW5kbGVTdGF0ZSk7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYucm91dGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUm91dGUgY29udGFpbmVyIGNsaWNrIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yb3V0ZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmFjdGlvbjtcblxuICAgICAgICAgICAgaWYgKGFjdGlvbikge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGZbYWN0aW9uXSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNlbGZbYWN0aW9uXSgpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBpdGVtIHRvIGRhdGFiYXNlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmFkZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5pbnNlcnQoJ2F1dGhvcnMnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJpZFwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpdGxlXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJkZXNjcmlwdGlvblwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIHBob3RvOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwicGhvdG9cIl0nKS52YWx1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBBdXRob3JGaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldE5ld1N0YXRlKCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRWRpdCBpdGVtIGluIGRhdGFiYXNlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmVkaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlKCdhdXRob3JzJywge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiZGVzY3JpcHRpb25cIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBwaG90bzogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInBob3RvXCJdJykudmFsdWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGl0ZW0gZnJvbSBkYXRhYmFzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjb25maXJtKCfQktGLINC00LXQudGB0YLQstC40YLQtdC70YzQvdC+INGF0L7RgtC40YLQtSDRg9C00LDQu9C40YLRjCDQstGL0LHRgNCw0L3QvdC+0LPQviDQu9C10LrRgtC+0YDQsD8nKSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5kZWxldGUoJ2F1dGhvcnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwidGl0bGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJkZXNjcmlwdGlvblwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwaG90bzogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInBob3RvXCJdJykudmFsdWVcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXR1cEF1dGhvckZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldE5ld1N0YXRlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0dXAgYXV0aG9yIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBBdXRob3JGaWx0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0QXV0aG9yKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nO1xuXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmF1dGhvclNlbGVjdC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZSBibG9jayBzdGF0ZSBhY2NvcmRpbmcgdG8gZmlsdGVyIHNlbGVjdCB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5oYW5kbGVTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuYXV0aG9yU2VsZWN0LnZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNldEVkaXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByZXBhcmUgdGVtcGxhdGUgZm9yIGVkaXQvZGVsZXRlIGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0RWRpdFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgYXV0aG9ySWQgPSBzZWxmLmF1dGhvclNlbGVjdC52YWx1ZSA/IHBhcnNlSW50KHNlbGYuYXV0aG9yU2VsZWN0LnZhbHVlKSA6ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmdldEF1dGhvcihhdXRob3JJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2VbMF0sXG4gICAgICAgICAgICAgICAgICAgIGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ2FkbWluQXV0aG9yc19fZWRpdCcpO1xuXG4gICAgICAgICAgICAgICAgYm94LmlubmVySFRNTCA9IHNlbGYuZWRpdFRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkF1dGhvcnNfX3RpdGxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpdGxlXCJdJykudmFsdWUgPSBkYXRhLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJkZXNjcmlwdGlvblwiXScpLnZhbHVlID0gZGF0YS5kZXNjcmlwdGlvbjtcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwicGhvdG9cIl0nKS52YWx1ZSA9IGRhdGEucGhvdG87XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluQXV0aG9yc19fYm94X19idXR0b25fdHlwZV9hZGQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5yZW5kZXIoYm94KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVwYXJlIHRlbXBsYXRlIGZvciBhZGQgbmV3IGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0TmV3U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ2FkbWluQXV0aG9yc19fYWRkJyk7XG5cbiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSBzZWxmLmVkaXRUZW1wbGF0ZTtcblxuICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkF1dGhvcnNfX2JveF9fY29sXzEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluQXV0aG9yc19fYm94X19idXR0b25fdHlwZV9lZGl0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkF1dGhvcnNfX2JveF9fYnV0dG9uX3R5cGVfcmVtb3ZlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgc2VsZi5yZW5kZXIoYm94KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHRlbXBsYXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcG9ydCBwcm9wZXJ0aWVzIGZyb20gTWFpbiBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYXBwLm1vZHVsZXMubWFpbi5ib2R5O1xuICAgICAgICAgICAgc2VsZi5hbGVydCA9IGFwcC5tb2R1bGVzLmFkbWluLmFsZXJ0O1xuICAgICAgICAgICAgc2VsZi5nZXRBdXRob3IgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0QXV0aG9yO1xuICAgICAgICAgICAgc2VsZi5pbnNlcnQgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuaW5zZXJ0O1xuICAgICAgICAgICAgc2VsZi51cGRhdGUgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkudXBkYXRlO1xuICAgICAgICAgICAgc2VsZi5kZWxldGUgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZGVsZXRlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb250YWluZXIpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwQXV0aG9yRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiBhcHApKSB7XG4gICAgICAgIGFwcC5tb2R1bGVzID0ge307XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZXMuYWRtaW5BdXRob3JzID0gbmV3IEFkbWluQXV0aG9ycygpO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnYWRtaW4nIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEFkbWluIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBBZG1pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkbWluJyk7XG4gICAgICAgIHNlbGYuYXNpZGUgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYWRtaW5fX2FzaWRlJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudHMgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYXNpZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLmhhbmRsZUFzaWRlQ2xpY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGUgY2xpY2sgaW4gYXNpZGUgYXJlYVxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaGFuZGxlQXNpZGVDbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgIHRhZ05hbWUgPSB0YXJnZXQudGFnTmFtZSxcbiAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXQgPSAnJztcbiAgICAgICAgICAgICAgICBhY3RpdmVCb3ggPSAnJztcbiAgICAgICAgICAgICAgICBpZCA9ICcnO1xuXG4gICAgICAgICAgICBpZiAodGFnTmFtZSA9PT0gJ0EnKSB7XG5cbiAgICAgICAgICAgICAgICBpZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldCA9IHNlbGYuYXNpZGUucXVlcnlTZWxlY3RvcignLmFkbWluX19hc2lkZV9fbGlua19zdGF0ZV9hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIGFjdGl2ZUJveCA9IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbl9fYm94X3N0YXRlX2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhcmdldCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhZG1pbl9fYXNpZGVfX2xpbmtfc3RhdGVfYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQm94KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2FkbWluX19ib3hfc3RhdGVfYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWRtaW5fX2FzaWRlX19saW5rX3N0YXRlX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoaWQpLmNsYXNzTGlzdC5hZGQoJ2FkbWluX19ib3hfc3RhdGVfYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyBhbGVydCBtb2RhbCB3aW5kb3dcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuYWxlcnQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICBhbGVydChvcHRpb25zLnRleHQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBvcnQgcHJvcGVydGllcyBmcm9tIE1haW4gY2xhc3NcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGFwcC5tb2R1bGVzLm1haW4uYm9keTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29udGFpbmVyKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKCEoJ21vZHVsZXMnIGluIGFwcCkpIHtcbiAgICAgICAgYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBhcHAubW9kdWxlcy5hZG1pbiA9IG5ldyBBZG1pbigpO1xufSkoKTtcblxuXG4iLCIoZnVuY3Rpb24gKCkge1xuICAgIGlmICgnbW9kdWxlcycgaW4gYXBwICYmICdhZG1pbkxlY3R1cmVzJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBBZG1pbkxlY3R1cmVzIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBBZG1pbkxlY3R1cmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5ib2R5ID0gJyc7XG4gICAgICAgIHNlbGYuYWxlcnQgPSAnJztcbiAgICAgICAgc2VsZi5nZXRMZWN0dXJlID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0U2Nob29sID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0QXV0aG9yID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0UGxhY2UgPSAnJztcbiAgICAgICAgc2VsZi5pbnNlcnQgPSAnJztcbiAgICAgICAgc2VsZi51cGRhdGUgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5MZWN0dXJlcycpO1xuICAgICAgICBzZWxmLmNvbnRlbnQgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYWRtaW5MZWN0dXJlc19fY29udGVudCcpO1xuICAgICAgICBzZWxmLmxlY3R1cmVTZWxlY3QgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJsZWN0dXJlXCJdJyk7XG4gICAgICAgIHNlbGYuZWRpdFRlbXBsYXRlID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignI2FkbWluTGVjdHVyZXMtdGVtcGxhdGUnKS5pbm5lckhUTUw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5sZWN0dXJlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuaGFuZGxlU3RhdGUpO1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLnJvdXRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvdXRlIGNvbnRhaW5lciBjbGljayBldmVudFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucm91dGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSBldmVudC50YXJnZXQuZGF0YXNldC5hY3Rpb247XG5cbiAgICAgICAgICAgIGlmIChhY3Rpb24pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxmW2FjdGlvbl0pIHtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmW2FjdGlvbl0oKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgaXRlbSB0byBkYXRhYmFzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5hZGQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuaW5zZXJ0KCdsZWN0dXJlcycsIHtcbiAgICAgICAgICAgICAgICBpZDogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImlkXCJdJykudmFsdWUpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwidGl0bGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBzY2hvb2w6IFtdLnNsaWNlLmNhbGwoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwic2Nob29sXCJdIG9wdGlvbjpjaGVja2VkJykpLm1hcChmdW5jdGlvbihpdGVtKSB7cmV0dXJuIHBhcnNlSW50KGl0ZW0udmFsdWUpfSksXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBbXS5zbGljZS5jYWxsKHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cImF1dGhvclwiXSBvcHRpb246Y2hlY2tlZCcpKS5tYXAoZnVuY3Rpb24oaXRlbSkge3JldHVybiBwYXJzZUludChpdGVtLnZhbHVlKX0pLFxuICAgICAgICAgICAgICAgIGRhdGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJkYXRlXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgdGltZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpbWVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBwbGFjZTogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwicGxhY2VcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgaXNPdmVyOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJpc092ZXJcIl0nKS52YWx1ZSkgPT09IDEsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwicmVzb3VyY2VzXCJdJykudmFsdWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGVjdHVyZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0TmV3U3RhdGUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFZGl0IGl0ZW0gaW4gZGF0YWJhc2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZWRpdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi51cGRhdGUoJ2xlY3R1cmVzJywge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIHNjaG9vbDogW10uc2xpY2UuY2FsbChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJzY2hvb2xcIl0gb3B0aW9uOmNoZWNrZWQnKSkubWFwKGZ1bmN0aW9uKGl0ZW0pIHtyZXR1cm4gcGFyc2VJbnQoaXRlbS52YWx1ZSl9KSxcbiAgICAgICAgICAgICAgICBhdXRob3I6IFtdLnNsaWNlLmNhbGwoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwiYXV0aG9yXCJdIG9wdGlvbjpjaGVja2VkJykpLm1hcChmdW5jdGlvbihpdGVtKSB7cmV0dXJuIHBhcnNlSW50KGl0ZW0udmFsdWUpfSksXG4gICAgICAgICAgICAgICAgZGF0ZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImRhdGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICB0aW1lOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwidGltZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIHBsYWNlOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJwbGFjZVwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICBpc092ZXI6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cImlzT3ZlclwiXScpLnZhbHVlKSA9PT0gMSxcbiAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJyZXNvdXJjZXNcIl0nKS52YWx1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgaXRlbSBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ9CS0Ysg0LTQtdC50YHRgtCy0LjRgtC10LvRjNC90L4g0YXQvtGC0LjRgtC1INGD0LTQsNC70LjRgtGMINCy0YvQsdGA0LDQvdC90YPRjiDQu9C10LrRhtC40Y4/JykpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuZGVsZXRlKCdsZWN0dXJlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJpZFwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzY2hvb2w6IFtdLnNsaWNlLmNhbGwoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwic2Nob29sXCJdIG9wdGlvbjpjaGVja2VkJykpLm1hcChmdW5jdGlvbihpdGVtKSB7cmV0dXJuIHBhcnNlSW50KGl0ZW0udmFsdWUpfSksXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogW10uc2xpY2UuY2FsbChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJhdXRob3JcIl0gb3B0aW9uOmNoZWNrZWQnKSkubWFwKGZ1bmN0aW9uKGl0ZW0pIHtyZXR1cm4gcGFyc2VJbnQoaXRlbS52YWx1ZSl9KSxcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImRhdGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGltZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpbWVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2U6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cInBsYWNlXCJdJykudmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBpc092ZXI6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cImlzT3ZlclwiXScpLnZhbHVlKSA9PT0gMSxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwicmVzb3VyY2VzXCJdJykudmFsdWVcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXR1cExlY3R1cmVGaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHVwIGxlY3R1cmUgZmlsdGVyIHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExlY3R1cmVGaWx0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0TGVjdHVyZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8b3B0aW9uIHZhbHVlPVwiXCI+PC9vcHRpb24+JztcblxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKyc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5sZWN0dXJlU2VsZWN0LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hhbmdlIGJsb2NrIHN0YXRlIGFjY29yZGluZyB0byBmaWx0ZXIgc2VsZWN0IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmhhbmRsZVN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5sZWN0dXJlU2VsZWN0LnZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNldEVkaXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByZXBhcmUgdGVtcGxhdGUgZm9yIGVkaXQvZGVsZXRlIGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0RWRpdFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbGVjdHVyZUlkID0gc2VsZi5sZWN0dXJlU2VsZWN0LnZhbHVlID8gcGFyc2VJbnQoc2VsZi5sZWN0dXJlU2VsZWN0LnZhbHVlKSA6ICcnLFxuICAgICAgICAgICAgICAgIGRhdGEgPSB7fTtcblxuICAgICAgICAgICAgc2VsZi5nZXRTY2hvb2woKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGF0YVsnc2Nob29scyddID0gcmVzcG9uc2U7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRBdXRob3IoKTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkYXRhWydhdXRob3JzJ10gPSByZXNwb25zZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFBsYWNlKCk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGF0YVsncGxhY2VzJ10gPSByZXNwb25zZTtcblxuICAgICAgICAgICAgICAgIHNlbGYuZ2V0TGVjdHVyZShsZWN0dXJlSWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsncmVzcG9uc2UnXSA9IHJlc3BvbnNlWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZCgnYWRtaW5MZWN0dXJlc19fZWRpdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSBzZWxmLmVkaXRUZW1wbGF0ZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nob29sU2VsZWN0ID0gJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JTZWxlY3QgPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlU2VsZWN0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zY2hvb2xzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBkYXRhLnJlc3BvbnNlLnNjaG9vbC5pbmRleE9mKGl0ZW0uaWQpICE9PSAtMSA/ICdzZWxlY3RlZCcgOiAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sU2VsZWN0ICs9ICc8b3B0aW9uICcrIGlzU2VsZWN0ZWQgKycgdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJyAoJysgaXRlbS5zdHVkZW50ICsnINGH0LXQuy4pPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5hdXRob3JzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBkYXRhLnJlc3BvbnNlLmF1dGhvci5pbmRleE9mKGl0ZW0uaWQpICE9PSAtMSA/ICdzZWxlY3RlZCcgOiAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yU2VsZWN0ICs9ICc8b3B0aW9uICcrIGlzU2VsZWN0ZWQgKycgdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucGxhY2VzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBkYXRhLnJlc3BvbnNlLnBsYWNlID09PSBpdGVtLmlkID8gJ3NlbGVjdGVkJyA6ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZVNlbGVjdCArPSAnPG9wdGlvbiAnKyBpc1NlbGVjdGVkICsnIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKycgKNCy0LzQtdGB0YLQuNC80L7RgdGC0Yw6ICcrIGl0ZW0uY2FwYWNpdHkgKycg0YfQtdC7Lik8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5MZWN0dXJlc19fdGl0bGUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSA9IGRhdGEucmVzcG9uc2UuaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlID0gZGF0YS5yZXNwb25zZS50aXRsZTtcblxuICAgICAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwic2Nob29sXCJdJykuaW5uZXJIVE1MID0gc2Nob29sU2VsZWN0O1xuXG4gICAgICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJhdXRob3JcIl0nKS5pbm5lckhUTUwgPSBhdXRob3JTZWxlY3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJkYXRlXCJdJykudmFsdWUgPSBkYXRhLnJlc3BvbnNlLmRhdGU7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aW1lXCJdJykudmFsdWUgPSBkYXRhLnJlc3BvbnNlLnRpbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cInBsYWNlXCJdJykuaW5uZXJIVE1MID0gcGxhY2VTZWxlY3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cImlzT3ZlclwiXSBvcHRpb25bdmFsdWU9XCInICsgKGRhdGEucmVzcG9uc2UuaXNPdmVyID8gMSA6IDApICsgJ1wiXScpLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInJlc291cmNlc1wiXScpLnZhbHVlID0gZGF0YS5yZXNwb25zZS5yZXNvdXJjZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkxlY3R1cmVzX19ib3hfX2J1dHRvbl90eXBlX2FkZCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW5kZXIoYm94KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVwYXJlIHRlbXBsYXRlIGZvciBhZGQgbmV3IGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0TmV3U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgICAgICAgIHNlbGYuZ2V0U2Nob29sKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRhdGFbJ3NjaG9vbHMnXSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0QXV0aG9yKCk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGF0YVsnYXV0aG9ycyddID0gcmVzcG9uc2U7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRQbGFjZSgpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRhdGFbJ3BsYWNlcyddID0gcmVzcG9uc2U7XG5cbiAgICAgICAgICAgICAgICB2YXIgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZCgnYWRtaW5MZWN0dXJlc19fYWRkJyk7XG5cbiAgICAgICAgICAgICAgICBib3guaW5uZXJIVE1MID0gc2VsZi5lZGl0VGVtcGxhdGU7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Nob29sU2VsZWN0ID0gJycsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvclNlbGVjdCA9ICcnLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZVNlbGVjdCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgZGF0YS5zY2hvb2xzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBzY2hvb2xTZWxlY3QgKz0gJzxvcHRpb24gdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJyAoJysgaXRlbS5zdHVkZW50ICsnINGH0LXQuy4pPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGRhdGEuYXV0aG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yU2VsZWN0ICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKyc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZGF0YS5wbGFjZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlU2VsZWN0ICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKycgKNCy0LzQtdGB0YLQuNC80L7RgdGC0Yw6ICcrIGl0ZW0uY2FwYWNpdHkgKycg0YfQtdC7Lik8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbkxlY3R1cmVzX19ib3hfX2NvbF8xJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJzY2hvb2xcIl0nKS5pbm5lckhUTUwgPSBzY2hvb2xTZWxlY3Q7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwiYXV0aG9yXCJdJykuaW5uZXJIVE1MID0gYXV0aG9yU2VsZWN0O1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtU2VsZWN0X19zZWxlY3RbbmFtZT1cInBsYWNlXCJdJykuaW5uZXJIVE1MID0gcGxhY2VTZWxlY3Q7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluTGVjdHVyZXNfX2JveF9fYnV0dG9uX3R5cGVfZWRpdCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluTGVjdHVyZXNfX2JveF9fYnV0dG9uX3R5cGVfcmVtb3ZlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIHNlbGYucmVuZGVyKGJveCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHRlbXBsYXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcG9ydCBwcm9wZXJ0aWVzIGZyb20gTWFpbiBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYXBwLm1vZHVsZXMubWFpbi5ib2R5O1xuICAgICAgICAgICAgc2VsZi5hbGVydCA9IGFwcC5tb2R1bGVzLmFkbWluLmFsZXJ0O1xuICAgICAgICAgICAgc2VsZi5nZXRMZWN0dXJlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldExlY3R1cmU7XG4gICAgICAgICAgICBzZWxmLmdldFNjaG9vbCA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRTY2hvb2w7XG4gICAgICAgICAgICBzZWxmLmdldEF1dGhvciA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRBdXRob3I7XG4gICAgICAgICAgICBzZWxmLmdldFBsYWNlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldFBsYWNlO1xuICAgICAgICAgICAgc2VsZi5pbnNlcnQgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuaW5zZXJ0O1xuICAgICAgICAgICAgc2VsZi51cGRhdGUgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkudXBkYXRlO1xuICAgICAgICAgICAgc2VsZi5kZWxldGUgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZGVsZXRlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb250YWluZXIpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGVjdHVyZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLmFkbWluTGVjdHVyZXMgPSBuZXcgQWRtaW5MZWN0dXJlcygpO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdtb2R1bGVzJyBpbiBhcHAgJiYgJ2FkbWluUGxhY2VzJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBBZG1pblBsYWNlcyBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgQWRtaW5QbGFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmJvZHkgPSAnJztcbiAgICAgICAgc2VsZi5hbGVydCA9ICcnO1xuICAgICAgICBzZWxmLmdldFBsYWNlID0gJyc7XG4gICAgICAgIHNlbGYuaW5zZXJ0ID0gJyc7XG4gICAgICAgIHNlbGYudXBkYXRlID0gJyc7XG4gICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkbWluUGxhY2VzJyk7XG4gICAgICAgIHNlbGYuY29udGVudCA9IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblBsYWNlc19fY29udGVudCcpO1xuICAgICAgICBzZWxmLnBsYWNlU2VsZWN0ID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1TZWxlY3RfX3NlbGVjdFtuYW1lPVwicGxhY2VcIl0nKTtcbiAgICAgICAgc2VsZi5lZGl0VGVtcGxhdGUgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYWRtaW5QbGFjZXMtdGVtcGxhdGUnKS5pbm5lckhUTUw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGFjZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBzZWxmLmhhbmRsZVN0YXRlKTtcbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5yb3V0ZXIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb3V0ZSBjb250YWluZXIgY2xpY2sgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJvdXRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuYWN0aW9uO1xuXG4gICAgICAgICAgICBpZiAoYWN0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZlthY3Rpb25dKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZlthY3Rpb25dKCk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGl0ZW0gdG8gZGF0YWJhc2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuYWRkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmluc2VydCgncGxhY2VzJywge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJhZGRyZXNzXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgbGluazogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImxpbmtcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBjYXBhY2l0eTogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImNhcGFjaXR5XCJdJykudmFsdWUpXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cFBsYWNlRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVkaXQgaXRlbSBpbiBkYXRhYmFzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5lZGl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZSgncGxhY2VzJywge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJhZGRyZXNzXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgbGluazogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImxpbmtcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBjYXBhY2l0eTogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImNhcGFjaXR5XCJdJykudmFsdWUpXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBpdGVtIGZyb20gZGF0YWJhc2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlybSgn0JLRiyDQtNC10LnRgdGC0LLQuNGC0LXQu9GM0L3QviDRhdC+0YLQuNGC0LUg0YPQtNCw0LvQuNGC0Ywg0LLRi9Cx0YDQsNC90L3Rg9GOINCw0YPQtNC40YLQvtGA0LjRjj8nKSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5kZWxldGUoJ3BsYWNlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJpZFwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiYWRkcmVzc1wiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwibGlua1wiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBjYXBhY2l0eTogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImNhcGFjaXR5XCJdJykudmFsdWUpXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBQbGFjZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldE5ld1N0YXRlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0dXAgcGxhY2UgZmlsdGVyIHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cFBsYWNlRmlsdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmdldFBsYWNlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nO1xuXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnBsYWNlU2VsZWN0LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hhbmdlIGJsb2NrIHN0YXRlIGFjY29yZGluZyB0byBmaWx0ZXIgc2VsZWN0IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmhhbmRsZVN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5wbGFjZVNlbGVjdC52YWx1ZSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXRFZGl0U3RhdGUoKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuc2V0TmV3U3RhdGUoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVwYXJlIHRlbXBsYXRlIGZvciBlZGl0L2RlbGV0ZSBpdGVtIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldEVkaXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHBsYWNlSWQgPSBzZWxmLnBsYWNlU2VsZWN0LnZhbHVlID8gcGFyc2VJbnQoc2VsZi5wbGFjZVNlbGVjdC52YWx1ZSkgOiAnJztcblxuICAgICAgICAgICAgc2VsZi5nZXRQbGFjZShwbGFjZUlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZVswXSxcbiAgICAgICAgICAgICAgICAgICAgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZCgnYWRtaW5QbGFjZXNfX2VkaXQnKTtcblxuICAgICAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSBzZWxmLmVkaXRUZW1wbGF0ZTtcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5QbGFjZXNfX3RpdGxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpdGxlXCJdJykudmFsdWUgPSBkYXRhLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJhZGRyZXNzXCJdJykudmFsdWUgPSBkYXRhLmFkZHJlc3M7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cImxpbmtcIl0nKS52YWx1ZSA9IGRhdGEubGluaztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiY2FwYWNpdHlcIl0nKS52YWx1ZSA9IGRhdGEuY2FwYWNpdHk7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluUGxhY2VzX19ib3hfX2J1dHRvbl90eXBlX2FkZCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcihib3gpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByZXBhcmUgdGVtcGxhdGUgZm9yIGFkZCBuZXcgaXRlbSBzdGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5nZXRQbGFjZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIHZhciBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgICAgIGJveC5jbGFzc0xpc3QuYWRkKCdhZG1pblBsYWNlc19fYWRkJyk7XG5cbiAgICAgICAgICAgICAgICBib3guaW5uZXJIVE1MID0gc2VsZi5lZGl0VGVtcGxhdGU7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluUGxhY2VzX19ib3hfX2NvbF8xJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5QbGFjZXNfX2JveF9fYnV0dG9uX3R5cGVfZWRpdCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluUGxhY2VzX19ib3hfX2J1dHRvbl90eXBlX3JlbW92ZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcihib3gpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0ZW1wbGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW5kZXIgPSBmdW5jdGlvbih0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgc2VsZi5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBvcnQgcHJvcGVydGllcyBmcm9tIE1haW4gY2xhc3NcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGFwcC5tb2R1bGVzLm1haW4uYm9keTtcbiAgICAgICAgICAgIHNlbGYuYWxlcnQgPSBhcHAubW9kdWxlcy5hZG1pbi5hbGVydDtcbiAgICAgICAgICAgIHNlbGYuZ2V0UGxhY2UgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0UGxhY2U7XG4gICAgICAgICAgICBzZWxmLmluc2VydCA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5pbnNlcnQ7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZSA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS51cGRhdGU7XG4gICAgICAgICAgICBzZWxmLmRlbGV0ZSA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5kZWxldGU7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbnRhaW5lcikge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cygpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBQbGFjZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLmFkbWluUGxhY2VzID0gbmV3IEFkbWluUGxhY2VzKCk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnYWRtaW5TY2hlZHVsZScgaW4gYXBwLm1vZHVsZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQWRtaW5TY2hlZHVsZSBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgQWRtaW5TY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuYm9keSA9ICcnO1xuICAgICAgICBzZWxmLmdldFNjaGVkdWxlID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0UGxhY2UgPSAnJztcbiAgICAgICAgc2VsZi5nZXRTY2hvb2wgPSAnJztcbiAgICAgICAgc2VsZi5nZXRBdXRob3IgPSAnJztcbiAgICAgICAgc2VsZi5leHBhbmQgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZScpO1xuICAgICAgICBzZWxmLmNvbnRlbnQgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZV9fY29udGVudCcpO1xuICAgICAgICBzZWxmLmRhdGVGcm9tSW5wdXQgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiZnJvbVwiXScpO1xuICAgICAgICBzZWxmLmRhdGVUb0lucHV0ID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRvXCJdJyk7XG4gICAgICAgIHNlbGYucGxhY2VTZWxlY3QgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJwbGFjZVwiXScpO1xuICAgICAgICBzZWxmLnRlbXBsYXRlID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignI2FkbWluU2NoZWR1bGUtdGVtcGxhdGUnKS5pbm5lckhUTUw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5kYXRlRnJvbUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuZ2V0RGF0YSk7XG4gICAgICAgICAgICBzZWxmLmRhdGVUb0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuZ2V0RGF0YSk7XG4gICAgICAgICAgICBzZWxmLnBsYWNlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuZ2V0RGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHVwIHBsYWNlIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBQbGFjZUZpbHRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5nZXRQbGFjZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8b3B0aW9uIHZhbHVlPVwiXCI+PC9vcHRpb24+JztcblxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKyc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5wbGFjZVNlbGVjdC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCBkYXRhIGZyb20gbGlicmFyeSBhY2NvcmRpbmcgdG8gZmlsdGVyIHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5nZXREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBzZWxmLmRhdGVGcm9tSW5wdXQudmFsdWUucmVwbGFjZSgvLS9nLCAnLycpLFxuICAgICAgICAgICAgICAgIGRhdGVUbyA9IHNlbGYuZGF0ZVRvSW5wdXQudmFsdWUucmVwbGFjZSgvLS9nLCAnLycpLFxuICAgICAgICAgICAgICAgIHBsYWNlID0gc2VsZi5wbGFjZVNlbGVjdC52YWx1ZSA/IHBhcnNlSW50KHNlbGYucGxhY2VTZWxlY3QudmFsdWUpIDogJyc7XG5cbiAgICAgICAgICAgIHNlbGYuZ2V0U2NoZWR1bGUoZGF0ZUZyb20sIGRhdGVUbywgcGxhY2UpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcihyZXNwb25zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHNjaGVkdWxlIGxpc3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgICAgICBjb250ZW50TGlzdC5jbGFzc0xpc3QuYWRkKCdhZG1pblNjaGVkdWxlX19saXN0Jyk7XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLmxlY3R1cmVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cbiAgICAgICAgICAgICAgICBjb250ZW50SXRlbS5jbGFzc0xpc3QuYWRkKCdhZG1pblNjaGVkdWxlX19pdGVtJyk7XG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0uaW5uZXJIVE1MID0gc2VsZi50ZW1wbGF0ZTtcblxuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX25hbWUnKS5pbm5lckhUTUwgPSBpdGVtLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fc2Nob29sJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKGl0ZW0uc2Nob29sLCB7dGl0bGU6ICdzY2hvb2xzJywgZGF0YTogcmVzcG9uc2Uuc2Nob29sc30sICd0aXRsZScpO1xuXG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fYXV0aG9yJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKGl0ZW0uYXV0aG9yLCB7dGl0bGU6ICdhdXRob3JzJywgZGF0YTogcmVzcG9uc2UuYXV0aG9yc30sICd0aXRsZScpO1xuXG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fZGF0ZScpLmlubmVySFRNTCArPSBpdGVtLmRhdGU7XG5cbiAgICAgICAgICAgICAgICBjb250ZW50SXRlbS5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZV9fYm94X190aW1lJykuaW5uZXJIVE1MICs9IGl0ZW0udGltZTtcblxuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX3BsYWNlJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKFtpdGVtLnBsYWNlXSwge3RpdGxlOiAncGxhY2VzJywgZGF0YTogcmVzcG9uc2UucGxhY2VzfSwgJ3RpdGxlJyk7XG5cbiAgICAgICAgICAgICAgICBjb250ZW50SXRlbS5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZV9fYm94X19zdGF0dXMnKS5pbm5lckhUTUwgKz0gaXRlbS5pc092ZXIgPyAn0JvQtdC60YbQuNGPINC30LDQutC+0L3Rh9C40LvQsNGB0YwnIDogJ9Cb0LXQutGG0LjRjyDQtdGJ0LUg0L3QtSDQt9Cw0LrQvtC90YfQuNC70LDRgdGMJztcblxuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX3Jlc291cmNlcyBhJykuaHJlZiA9IGl0ZW0ucmVzb3VyY2VzO1xuXG4gICAgICAgICAgICAgICAgY29udGVudExpc3QuYXBwZW5kQ2hpbGQoY29udGVudEl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnRMaXN0KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW1wb3J0IHByb3BlcnRpZXMgZnJvbSBNYWluIGNsYXNzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmJvZHkgPSBhcHAubW9kdWxlcy5tYWluLmJvZHk7XG4gICAgICAgICAgICBzZWxmLmdldFNjaGVkdWxlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldFNjaGVkdWxlO1xuICAgICAgICAgICAgc2VsZi5nZXRQbGFjZSA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRQbGFjZTtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2Nob29sID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldFNjaG9vbDtcbiAgICAgICAgICAgIHNlbGYuZ2V0QXV0aG9yID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldEF1dGhvcjtcbiAgICAgICAgICAgIHNlbGYuZXhwYW5kID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmV4cGFuZDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29udGFpbmVyKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cFBsYWNlRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5nZXREYXRhKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKCEoJ21vZHVsZXMnIGluIGFwcCkpIHtcbiAgICAgICAgYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBhcHAubW9kdWxlcy5hZG1pblNjaGVkdWxlID0gbmV3IEFkbWluU2NoZWR1bGUoKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgIGlmICgnbW9kdWxlcycgaW4gYXBwICYmICdhZG1pblNjaG9vbHMnIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEFkbWluU2Nob29scyBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgQWRtaW5TY2hvb2xzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5ib2R5ID0gJyc7XG4gICAgICAgIHNlbGYuYWxlcnQgPSAnJztcbiAgICAgICAgc2VsZi5nZXRTY2hvb2wgPSAnJztcbiAgICAgICAgc2VsZi5pbnNlcnQgPSAnJztcbiAgICAgICAgc2VsZi51cGRhdGUgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hvb2xzJyk7XG4gICAgICAgIHNlbGYuY29udGVudCA9IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaG9vbHNfX2NvbnRlbnQnKTtcbiAgICAgICAgc2VsZi5zY2hvb2xTZWxlY3QgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybVNlbGVjdF9fc2VsZWN0W25hbWU9XCJzY2hvb2xcIl0nKTtcbiAgICAgICAgc2VsZi5lZGl0VGVtcGxhdGUgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYWRtaW5TY2hvb2xzLXRlbXBsYXRlJykuaW5uZXJIVE1MO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Nob29sU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuaGFuZGxlU3RhdGUpO1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLnJvdXRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvdXRlIGNvbnRhaW5lciBjbGljayBldmVudFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucm91dGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSBldmVudC50YXJnZXQuZGF0YXNldC5hY3Rpb247XG5cbiAgICAgICAgICAgIGlmIChhY3Rpb24pIHtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxmW2FjdGlvbl0pIHtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmW2FjdGlvbl0oKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgaXRlbSB0byBkYXRhYmFzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5hZGQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuaW5zZXJ0KCdzY2hvb2xzJywge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJ0aXRsZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIHN0dWRlbnQ6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJzdHVkZW50XCJdJykudmFsdWUpXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cFNjaG9vbEZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0TmV3U3RhdGUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFZGl0IGl0ZW0gaW4gZGF0YWJhc2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZWRpdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi51cGRhdGUoJ3NjaG9vbHMnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHNlbGYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJpZFwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpdGxlXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgc3R1ZGVudDogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInN0dWRlbnRcIl0nKS52YWx1ZSlcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGl0ZW0gZnJvbSBkYXRhYmFzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjb25maXJtKCfQktGLINC00LXQudGB0YLQstC40YLQtdC70YzQvdC+INGF0L7RgtC40YLQtSDRg9C00LDQu9C40YLRjCDQstGL0LHRgNCw0L3QvdGD0Y4g0YjQutC+0LvRgz8nKSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5kZWxldGUoJ3NjaG9vbHMnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludChzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwidGl0bGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudDogcGFyc2VJbnQoc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInN0dWRlbnRcIl0nKS52YWx1ZSlcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXR1cFNjaG9vbEZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldE5ld1N0YXRlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0dXAgc2Nob29sIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBTY2hvb2xGaWx0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2Nob29sKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nO1xuXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInKyBpdGVtLmlkICsnXCI+JysgaXRlbS50aXRsZSArJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNjaG9vbFNlbGVjdC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZSBibG9jayBzdGF0ZSBhY2NvcmRpbmcgdG8gZmlsdGVyIHNlbGVjdCB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5oYW5kbGVTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2Nob29sU2VsZWN0LnZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnNldEVkaXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zZXROZXdTdGF0ZSgpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByZXBhcmUgdGVtcGxhdGUgZm9yIGVkaXQvZGVsZXRlIGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0RWRpdFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2Nob29sSWQgPSBzZWxmLnNjaG9vbFNlbGVjdC52YWx1ZSA/IHBhcnNlSW50KHNlbGYuc2Nob29sU2VsZWN0LnZhbHVlKSA6ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmdldFNjaG9vbChzY2hvb2xJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2VbMF0sXG4gICAgICAgICAgICAgICAgICAgIGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ2FkbWluU2Nob29sc19fZWRpdCcpO1xuXG4gICAgICAgICAgICAgICAgYm94LmlubmVySFRNTCA9IHNlbGYuZWRpdFRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaG9vbHNfX3RpdGxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiaWRcIl0nKS52YWx1ZSA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRpdGxlXCJdJykudmFsdWUgPSBkYXRhLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtSW5wdXRfX2lucHV0W25hbWU9XCJzdHVkZW50XCJdJykudmFsdWUgPSBkYXRhLnN0dWRlbnQ7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluU2Nob29sc19fYm94X19idXR0b25fdHlwZV9hZGQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5yZW5kZXIoYm94KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVwYXJlIHRlbXBsYXRlIGZvciBhZGQgbmV3IGl0ZW0gc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0TmV3U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2Nob29sKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ2FkbWluU2Nob29sc19fYWRkJyk7XG5cbiAgICAgICAgICAgICAgICBib3guaW5uZXJIVE1MID0gc2VsZi5lZGl0VGVtcGxhdGU7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluU2Nob29sc19fYm94X19jb2xfMScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcignLmFkbWluU2Nob29sc19fYm94X19idXR0b25fdHlwZV9lZGl0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hvb2xzX19ib3hfX2J1dHRvbl90eXBlX3JlbW92ZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcihib3gpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0ZW1wbGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW5kZXIgPSBmdW5jdGlvbih0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgc2VsZi5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBvcnQgcHJvcGVydGllcyBmcm9tIE1haW4gY2xhc3NcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGFwcC5tb2R1bGVzLm1haW4uYm9keTtcbiAgICAgICAgICAgIHNlbGYuYWxlcnQgPSBhcHAubW9kdWxlcy5hZG1pbi5hbGVydDtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2Nob29sID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldFNjaG9vbDtcbiAgICAgICAgICAgIHNlbGYuaW5zZXJ0ID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5Lmluc2VydDtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LnVwZGF0ZTtcbiAgICAgICAgICAgIHNlbGYuZGVsZXRlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmRlbGV0ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29udGFpbmVyKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXR1cFNjaG9vbEZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLmFkbWluU2Nob29scyA9IG5ldyBBZG1pblNjaG9vbHMoKTtcbn0pKCk7XG4iLCJ2YXIgaW5pdEFwcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICgnbW9kdWxlcycgaW4gYXBwICYmICdtYWluJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNYWluIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBNYWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgICAgIHNlbGYuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICAgICAgc2VsZi5tb2R1bGVzID0gYXBwLm1vZHVsZXM7XG4gICAgICAgIHNlbGYubGlicmFyeSA9IG5ldyBMaWJyYXJ5KCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbGlicmFyeSBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdExpYnJhcnkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYubGlicmFyeS5pbml0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgYWxsIG1vZHVsZXMgaW4gJC5tb2R1bGVzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXRNb2R1bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBtb2R1bGUgaW4gc2VsZi5tb2R1bGVzKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5tb2R1bGVzLmhhc093blByb3BlcnR5KG1vZHVsZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYubW9kdWxlc1ttb2R1bGVdLmluaXQgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZSAhPT0gJ21haW4nICYmIG1vZHVsZSAhPT0gJ2xpYnJhcnknKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubW9kdWxlc1ttb2R1bGVdLmluaXQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5pbml0TGlicmFyeSgpO1xuICAgICAgICAgICAgc2VsZi5pbml0TW9kdWxlcygpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLm1haW4gPSBuZXcgTWFpbigpO1xuXG4gICAgYXBwLm1vZHVsZXMubWFpbi5pbml0KCk7XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXRBcHApO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnbW9kYWwnIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1vZGFsIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuaHRtbCA9ICcnO1xuICAgICAgICBzZWxmLmJvZHkgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbiAgICAgICAgc2VsZi5vcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3RyaWdnZXInKTtcbiAgICAgICAgc2VsZi5jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9jbG9zZScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYucm91dGVyKTtcbiAgICAgICAgICAgIC8vIHNlbGYub3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAvLyBzZWxmLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5jbG9zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvdXRlIGNsaWNrIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yb3V0ZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX3RyaWdnZXInKSkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHNlbGYub3BlbihldmVudC50YXJnZXQpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX2Nsb3NlJykpIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKGV2ZW50LnRhcmdldCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9wZW4gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyksXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzcmMpO1xuXG4gICAgICAgICAgICBzZWxmLmh0bWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxfc3RhdGVfb3BlbicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLmNsb3NlID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbCcpO1xuXG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfc3RhdGVfb3BlbicpO1xuICAgICAgICAgICAgc2VsZi5odG1sLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW1wb3J0IHByb3BlcnRpZXMgZnJvbSBNYWluIGNsYXNzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmh0bWwgPSBhcHAubW9kdWxlcy5tYWluLmh0bWw7XG4gICAgICAgICAgICBzZWxmLmJvZHkgPSBhcHAubW9kdWxlcy5tYWluLmJvZHk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbnRhaW5lcikge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cygpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiBhcHApKSB7XG4gICAgICAgIGFwcC5tb2R1bGVzID0ge307XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcbn0pKCk7XG4iXX0=
